(import test/lists)

(= 2 (- 3 1))

(defn ++ [x] (+ x 1))

(defn ->> [x f ...rest] 
    (if (nil? rest)
        (f x)
        (ap ->> (cons (f x) rest))))
(->> 2
    ++)
(->> 2
    ++
    (fn [x] (= 3 x)))
(->> 2
    ++
    ++
    ++)

(list (+ 1 2) 4 () (fn [] ()))
(cons (++ 2) '(2 1))

(ap + '(1 2 3 4))
(ap + (range 1 5))

(pairs (range 0 10))

(macro switch [b 'x ...rest]
    (if b 
        (x)
        (ap switch rest)))

(defn err [] (assert 0))

(head '('ok err))
(if (= 1 0)
    (err)
    'good)

(switch 
    (= 1 0) (err)
    (= 2 0) (err)
    (= 0 0) 'ok)


(append 2 (append 3 '()))

(macro or [x ...rest] ;; macro for short-circuiting
    (if x 
        1
        (if (nil? rest)
            0
            (ap or rest))))